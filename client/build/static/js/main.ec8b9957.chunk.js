(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(69)},63:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),c=a(5);var o=function(e){return r.a.createElement("main",Object.assign({className:"wrapper"},e))},u=a(4),l=a.n(u),i=a(7),m=a(6),p=a(14),f=a.n(p),d={signUpUser:function(e){return f.a.post("/auth/signup",e)},loginUser:function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.post("/auth/login",t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),findAllUsers:function(){var e=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/auth/users/"));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getOneUser:function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get("/auth/user/".concat(t)));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},v=a(2),g=a.n(v);function h(e){var t=e.setToken,a=Object(n.useState)(),s=Object(m.a)(a,2),c=s[0],o=s[1],u=Object(n.useState)(),p=Object(m.a)(u,2),f=p[0],v=p[1],g=Object(n.useState)(),h=Object(m.a)(g,2),b=h[0],E=h[1],w=Object(n.useState)(),O=Object(m.a)(w,2),N=O[0],y=O[1],x=function(){var e=Object(i.a)(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.loginUser({username:b,password:N});case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("name is "+c+" "+f),console.log("username is "+b),console.log("password is "+N),e.next=6,d.signUpUser({firstName:c,lastName:f,username:b,password:N});case 6:return e.abrupt("return",x());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"col-sm-6 px-5"},r.a.createElement("div",{className:"m-4 text-center"},r.a.createElement("h3",null,"New Users"),r.a.createElement("hr",null)),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",{className:"container mt-3 px-5"},r.a.createElement("div",{className:"row form-group"},r.a.createElement("div",{className:"col",size:"12"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"First Name",name:"firstname",onChange:function(e){return o(e.target.value)}}))),r.a.createElement("div",{className:"row form-group"},r.a.createElement("div",{className:"col",size:"12"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Last Name",name:"lastname",onChange:function(e){return v(e.target.value)}}))),r.a.createElement("div",{className:"row form-group"},r.a.createElement("div",{className:"col",size:"12"},r.a.createElement("input",{className:"form-control",type:"username",placeholder:"username",name:"username",onChange:function(e){return E(e.target.value)}}))),r.a.createElement("div",{className:"row form-group"},r.a.createElement("div",{className:"col",size:"12"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"Password",name:"password",onChange:function(e){return y(e.target.value)}}))),r.a.createElement("button",{className:"btn btn-success",type:"submit"},"Sign Up"))))}function b(e){var t=e.setToken,a=Object(n.useState)(),s=Object(m.a)(a,2),c=s[0],o=s[1],u=Object(n.useState)(),p=Object(m.a)(u,2),f=p[0],v=p[1],g=function(){var e=Object(i.a)(l.a.mark(function e(a){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("username is "+c),console.log("password is "+f),e.prev=3,e.next=6,d.loginUser({username:c,password:f});case 6:n=e.sent,t(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("Login error: ",e.t0),alert("Incorrect username or password");case 14:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"text-center m-4"},"Welcome to Tee Time!"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 px-5"},r.a.createElement("div",{className:"m-4 text-center"},r.a.createElement("h3",null,"Log In"),r.a.createElement("hr",null)),r.a.createElement("form",{onSubmit:g},r.a.createElement("div",{className:"container mt-3 px-5"},r.a.createElement("div",{className:"row form-group"},r.a.createElement("div",{className:"col",size:"12"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Username",name:"username",onChange:function(e){return o(e.target.value)}}))),r.a.createElement("div",{className:"row form-group"},r.a.createElement("div",{className:"col",size:"12"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"Password",name:"password",onChange:function(e){return v(e.target.value)}}))),r.a.createElement("button",{className:"btn btn-success",type:"submit"},"Log In")))),r.a.createElement(h,{setToken:t}))))}b.propTypes={setToken:g.a.func.isRequired};var E=a(16),w=a(32),O={newOrOpenChat:function(e){return f.a.post("/chat/newOrOpenChat",e)},newOrOpenChatInvert:function(e){return f.a.post("/chat/newOrOpenChatInvert",e)},addMessage:function(e){return f.a.post("/chat/addMessage",e)},addMessageInvert:function(e){return f.a.post("/chat/addMessageInvert",e)},getMessages:function(){var e=Object(i.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(t),e.abrupt("return",f.a.get("/chat/getMessages/".concat(a)));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};var N=function(e){var t=e.messageList,a=e.messageList2,s=e.chatpartner,c=Object(n.useState)(),o=Object(m.a)(c,2),u=o[0],l=o[1];return Object(n.useEffect)(function(){!function(){if(t&&!a)for(var e=0;e<t.length;e++)t[e].chatPartner===s&&l(t[e].chats);else if(a)for(var n=0;n<a.length;n++)a[n].chatPartner===s&&l(a[n].chats)}()}),u?r.a.createElement("div",{className:"card mList"},r.a.createElement("div",{className:"message-list",id:"messageListBox"},u.map(function(e){return r.a.createElement("div",{className:"message"},r.a.createElement("div",{className:"senderId"},e.senderId),r.a.createElement("div",{className:"messageContent rounded d-inline-flex pr-1 pl-1"},e.text))}))):r.a.createElement("div",null)};function y(e){var t=e.thisUser,a=e.chatpartner,s=e.messageList,c=t.username,o=Object(n.useState)(),u=Object(m.a)(o,2),p=u[0],f=u[1],d=function(){var e=Object(i.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=7;break}return e.next=3,O.getMessages({user:c});case 3:n=e.sent,f(n.data),e.next=8;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){var e=setInterval(function(){d()},1e3);return function(){return clearInterval(e)}},[a]),r.a.createElement("div",null,r.a.createElement("div",{className:"form-popup chatbox",id:"myForm"},r.a.createElement("form",{className:"form-container"},r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){console.log("close clicked"),document.getElementById("myForm").style.display="none"}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),r.a.createElement("h5",{className:"mb-2 mt-2 ml-1"},"Chatting With: ",a),r.a.createElement(N,{thisUser:t,chatpartner:a,messageList:s,messageList2:p}),r.a.createElement("input",{id:"messageBox",type:"text",placeholder:"Type your message here",name:"msg"}),r.a.createElement("button",{type:"submit",className:"btn send",onClick:function(e){e.preventDefault();var n=document.getElementById("messageBox").value;O.addMessage({user:t.username,chatPartner:a,thisChat:{senderId:t.username,text:n}}),O.addMessageInvert({user:a,chatPartner:t.username,thisChat:{senderId:t.username,text:n}}),console.log("Message: ",n),document.getElementById("messageBox").value="",d()}},"Send"))))}function x(e){var t=e.users,a=e.setUsers,s=e.thisUser,c=s.username,o=Object(n.useState)(),u=Object(m.a)(o,2),p=u[0],f=u[1],v=Object(n.useState)(),g=Object(m.a)(v,2),h=g[0],b=g[1],N=function(){var e=Object(i.a)(l.a.mark(function e(t){var n,r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.findAllUsers();case 2:for(n=e.sent,r=n.data,s=0;s<r.length;s++)r[s]._id===localStorage.token.slice(10,34)&&r.splice([s],1);a(r);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getMessages({user:c});case 2:a=e.sent,b(a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){N()},[]);var j=function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.newOrOpenChat({user:s.username,chatPartner:t}),O.newOrOpenChatInvert({user:s.username,chatPartner:t}),f(t),document.getElementById("myForm").style.display="block";case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=r.a.forwardRef(function(e,t){var a=e.children,s=e.style,c=e.className,o=e["aria-labelledby"],u=Object(n.useState)(""),l=Object(m.a)(u,2),i=l[0],p=l[1];return r.a.createElement("div",{ref:t,style:s,className:c,"aria-labelledby":o},r.a.createElement(w.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to find users",onChange:function(e){return p(e.target.value)},value:i}),r.a.createElement("ul",{className:"list-unstyled"},r.a.Children.toArray(a).filter(function(e){return!i||e.props.children.includes(i)})))});return r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement("span",{className:"navbar-brand mb-0 h1"},"Navbar gonna be so lit"),r.a.createElement("div",{className:"nav navbar-right"},r.a.createElement(E.a,{className:"mr-3",onClick:x},r.a.createElement(E.a.Toggle,{className:"open-button",variant:"success",id:"dropdown-custom-components"},"Chat"),r.a.createElement(E.a.Menu,{as:k},t.map(function(e){return r.a.createElement(E.a.Item,{key:e._id,onClick:function(){return j(e.username)}},e.username)}))),r.a.createElement("button",{className:"open-button success mr-3",onClick:function(){console.log("logout clicked"),localStorage.clear(),window.location.reload()}},"Log Out"),r.a.createElement(y,{thisUser:s,chatpartner:p,messageList:h})))}function j(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],s=t[1],c=function(){var e=Object(i.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.token.slice(10,34),e.next=3,d.getOneUser(a);case 3:n=e.sent,s(n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){c()},[]);var o=Object(n.useState)([]),u=Object(m.a)(o,2),p=u[0],f=u[1];return r.a.createElement("div",null,r.a.createElement(x,{users:p,setUsers:f,thisUser:a}),r.a.createElement("div",{className:"m-4"},"Welcome user: ",r.a.createElement("strong",null,a.firstName," ",a.lastName)))}a(63);var k=function(){var e=function(){var e=Object(n.useState)(function(){var e=localStorage.length>0&&JSON.parse(localStorage.getItem("token"));return e?e.token:null}()),t=Object(m.a)(e,2),a=t[0],r=t[1];return{setToken:function(e){console.log("USERTOKEN: ",e);var t=e.data.user._id,a='{"token":"'.concat(t,'"}'),n=JSON.parse(a);localStorage.setItem("token",JSON.stringify(n)),r(n.token)},token:a}}(),t=e.token,a=e.setToken;return t?r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(o,null,r.a.createElement(c.a,{exact:!0,path:"/login",component:b}),r.a.createElement(c.a,{exact:!0,path:"/",component:j})))):r.a.createElement(b,{setToken:a})},S=a(18),C=a.n(S);a(67),a(68),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));C.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.ec8b9957.chunk.js.map